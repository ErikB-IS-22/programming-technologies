# Лабораторная работа №1. Отчёт.
## План лабораторной работы
1. Настройка окружения;
2. Обращение к OpenAI Responses API;
3. Главный цикл;
4. Troubleshooting;
5. Задания.

## Настройка окружения и написание базового кода
В ходе выполнения лабораторной работы, была создана отдельная рабочая область с вирутуальным оркужением. Это нужно для того, чтобы версии разный Python-библиотек не смешивались в разных проектах и можно было удобнее отделять одни библиотеки от других. Во избежание потери библиотек, с помощью команды: ``pip frezee > "requirements.txt"`` был создан текстовый файл со всеми установленными библиотеками.

### Начало работы с OpenAI
При первой попытке сделать запрос на API OpenAI, я столкнулся с проблемой, что с этим API нельзя работать бесплатно:

![Ошибка доступа к OpenAI](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image1.png)

Было принято решение использовать альтернативные библиотеки для работы с API нейронных сетей. После проб многих варинатов таких как: Huggingface, ai.io.net, Google и т.д. выбор пал на API от Mistral. Её плюс в том, что клиент Mistral может работать с библиотекой OpenAI, то есть устанавливать новых библиотек не пришлось. После применения этого клиента был создан базовый ассистент, который мог отвечать на вопросы:

![Успещный запуск программы с клиентом Mistral](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image2.png)

Далее было принято решение приступить к заданиям лаборатороной работы.

## Задание №1
Первое задание данной лабораторной работы звучит следующим образом:\
``Реализовать использование системного промпта через переменную окружения .env, либо через ручной ввод/выбор промпта и его сохраниение в базу данных при выборе соответствующей опции в терминале``

Для его выполнения в ``.env`` файл была добавлена переменная ``SYSTEM_PROMPT``. При выполнении программы она подгружалась и ассистент понимал, как ему нужно себя вести.
Для того, чтобы реализовать написание системного промпта перед началом работы и сохранение его в базу данных, код был значительно изменён. Для работы с базой данных была выбрана библиотека ``SqlLite``, т.к. она легковесная и подходит для маленьких задач, таких как эта. По итогу, при выполнении программы главный экран выглядит вот так:

![Реализация системного промпта через .env файл](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image3.png)

То есть если программа обнаружила в .env файле системный промпт, она не спрашивает пользователя о том, хочет ли он ввести/поменять его, а вот если в .env файле его нет, то поведение программы меняется:

![Поведение программы при отсутствии системного промпта в .env файле](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image4.png)

![Сохранение системных промптов в базе данных](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image5.png)
## Задание №2
В этом задании необходимо было поиграться с параметром ``temperature`` в настройках языковой модели и посмотреть, как будет меняться её поведение. Для проверки работы был выбран следующий вопрос: ``Как готовить салат Оливье?``. Сначала, было выбрано значение параметра temperature равное 0.1 и вот как ответил ассистент:

![Ответ ассистента при temperature=0.1](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image6.png)

Как видно из ответа, ассистент ответил без фантазии, чётко и по делу. Для второго теста параметр temperature был поднят до значения 1.3, и вот как на это отреагировал ассистент:

![Ответ ассистента при temperature=1.3](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image7.png)

Видно, что ассистент, мягко говоря, начал "чудить" и выдавал не связный ответ, и даже по ходу ответа менял язык.
## Задание №3
Суть задания состоит в том, чтобы научить ассистента помнить историю диалога и ограничить её до 6 последних сообщений: 3 пользовательских, 3 ИИшных. Для выполнения данного задания снова пришлось переработать код. Было добавлено 2 новые команды: ``show_history`` и ``clear_history``, с помощью которых можно смотреть историю и очищать её. Вот как это выглядит на практике:

![Новые команды для взаимодействия с ассистентом](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image8.png)

![Просмотр истории диалога](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image9.png)

![Общение с ассистентом при истории](https://github.com/NP1R777/programming-technologies-2025/blob/main/students/IS22/Zaharov%20Ilia/Lab1/pictures/image10.png)
## Вывод
При выполнении данной лабораторной работы, были получены знания по работе с API Mistral, управлении поведения ассистента и организации истории диалога.
